---
title: 递归
date: 2020-04-01 17:54:12
tags:
- recursion

categories:
- Data Structure
---

### 递归需要满足三个条件

* 一个问题可以分解为多个子问题；
* 分解后的子问题除了数据规模不同外，求解思路一致；
* 存在递归终止条件；

### 编写递归代码的关键

**推导出递归公式，找到终止条件， 最后翻译成代码。**
编写递归代码，只要遇到递归，我们就把它抽象成一个递推公式，不用考虑一层层调用关系，不要试图用人脑去分解递归的每个步骤。

<!--more-->

### 递归要警惕堆栈溢出

函数调用会使用栈来保存临时变量。每调用一个函数，都会将临时变量封装为栈帧压入内存栈，等函数执行完成返回时，才出栈。系统栈或者虚拟机栈空间一般都不大。如果递归求解的数据规模很大，调用层次很深，一直压入栈，就会有堆栈溢出的风险。

**如何避免堆栈溢出？**
当递归调用超过一定深度，就不再继续递归，直接返回报错。

### 递归要警惕重复计算
为了避免重复计算，我们可以通过一个数据结构（比如散列表）来保存已经求解过的 f(k)。当递归调用到 f(k) 时，先看下是否已经求解过了。如果是，则直接从散列表中取值返回，不需要重复计算，这样就能避免刚讲的问题了。

### 如何将递归代码改写为非递归代码

递归有利有弊，利是递归代码的表达力很强，写起来非常简洁；而弊就是空间复杂度高、有堆栈溢出的风险、存在重复计算、过多的函数调用会耗时较多等问题。所以，在开发过程中，我们要根据实际情况来选择是否需要用递归的方式来实现。