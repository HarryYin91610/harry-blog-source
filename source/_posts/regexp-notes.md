---
title: JS正则表达式学习笔记
date: 2018-10-25 10:46:00
tags:
- regular expression

categories:
- Algorithm

---

### RegExp对象

_Javascript 通过内置对象RegExp支持正则表达式_

有两种方法实例化RegExp对象:
1. 字面量  
```
var reg = /\bis\b/g;
```
<!--more-->

2. 构造函数  
```
var reg = new RegExp('\\bis\\b', 'g')
```

修饰符:
* g: global全文搜索，不添加，搜索到第一个匹配停止
* i: ignore case 忽略大小写，默认大小写敏感
* m: multiple lines 多行搜索

--------------------------------------------
### 元字符
* 原义文本字符
* 元字符: 在正则表达式中有特殊含义的非字母字符  
```
eg: * + ? $ ^ . | \  () {} []
```

--------------------------------------------
### 字符类
 
* 一般情况下，正则表达式一个字符对应字符串一个字符；  
* 我们可以使用元字符 [] 来构建一个简单的类（ 所谓的类是指符合某些特性的对象，一个泛指，而不是特指某个字符。）；  
```
eg: 表达式[abc]把字符a或b或c归为一类，表达式可以匹配这类字符```

字符类取反：
* 使用元字符 ^ 创建 反向类/负向类；  
* 反向类的意思是不属于某类的内容；  
```
eg: 表达式 [^abc]表示不是a、b、c 中任意一个的字符
```

--------------------------------------------
### 范围类
> * 正则表达式提供了范围类，我们可以使用[a-z]来连接两个字符 
> * 在 [] 组成的类内部可以连写 [a-zA-Z] 表示 _**从a到z以及A到Z的任意字符**_
> * 在 [] 内 - 在两个字符之间表示范围，若不是则单纯表示-字符

--------------------------------------------
### 预定义类
正则表达式提供了 __*预定义类*__ 来匹配常见的字符类。 


|字符|等价类| 含义| 
|--|-----------------|-----------------------------|
|. |[^\r\n]　　　　　 |除了回车符和换行符之外的所有字符|
|\d|[0-9] 　　　　　　 |数字字符|
|\D|[^0-9]           |非数字字符|
|\s|[\t\n\x0B\f\r] 　 |空白符|
|\S|[^\t\n\x0B\f\r]   |非空白符| 
|\w|[a-zA-Z_0-9] 　　  |单词字符（字母、数字、下划线)| 
|\W|[^a-zA-Z_0-9] 　　 |非单词字符|

正则表达式还提供了几个常用的边界匹配字符    

|字符|含义|  
|-----|------|
|^ 　　|以xxx（＾后面的字符）开始| 
|$ 　　|以xxx（＄前面的字符）结束| 
|\b 　 |单词边界|
|\B 　 |非单词边界|

--------------------------------------------
### 量词   
注：量词作用于紧挨着它的前一个字符或分组。

|字符|含义|
|------|------|
|?　   |出现0次或1次（最多出现一次）| 
|+　   |出现1次或多次（最少出现一次）|  
|*　   |出现0次或多次（任意次）|
|{n}   |出现n次|
|{n, m}|出现n次到m次|
|{n,}  |最少出现n次|

--------------------------------------------
### 贪婪与非贪婪模式

>* 贪婪模式（默认）：正则表达式尽可能多的匹配
>* 非贪婪模式：正则表达式尽可能少的匹配，一旦匹配成功就不再尝试匹配。__*方法： 在量词后加上?即可*__  
```
eg: /\d{3,5}?/g
```

--------------------------------------------
### 分组
* 使用 () 可以达到分组的功能，使量词作用于分组。 
```
    eg: 
    (Harry){3}  
    'a1b2c3d4'.replace(/([a-z]\d){3}/g, 'X')
```

* 或:  __*使用 | 可以达到或的效果*__
```
eg:  Harry | Yin
     Har(ry|yi)Yin
```

反向引用  

* 利用$加数字（从1开始）捕获分组
```
eg: '2018-07-16'.replace(/(\d{4})-(\d{2})-(\d{2})/g, '$2/$3/$1') 
```

* 不希望捕获分组，只需要在分组内加上 ?: 即可
```
eg: /(?:Harry).(ok)/
```

--------------------------------------------
### 前瞻
* 正则表达式从文本头部向尾部开始解析，因此文本尾部的方向称为“前”，文本头部为“后”；  
* __*前瞻*__ 就是正则表达式匹配规则时，向前检查是否符合断言，__*后顾/后瞻*__ 则方向相反；
* javascript不支持后顾；
* 符合特定断言称为肯定/正向匹配，不符合特定断言称为否定/负向匹配。

|名称|正则|
|---|----|
|正向前瞻|exp(?=assert)|
|负向前瞻|exp(?!assert)|
```
eg: \w(?=\d)  先匹配到一个单词字符，在判断其后面是否为数字，满足的话只会替换\w部分不包括断言部分。
```

--------------------------------------------
### 对象属性  
* global: 是否全文搜索，默认false；（只读）  
* ignoreCase: 是否忽略大小写，默认false；  
* multiline: 是否匹配多行，默认false；  
* lastIndex: 一个整数，表示开始下一次匹配的字符位置；  
* source: 正则表达式的源文本。

--------------------------------------------
### RegExp对象的方法

* test(str): 用于测试字符串参数中是否存在匹配正则表达式的字符串，存在返回true，否则false。  
```
eg: (/\w/g).test('a') // 每次都新实例化
```

* exec(str): 使用正则表达式对字符串参数进行搜索，并将更新全局RegExp对象的属性以反映匹配结果。如果没有匹配返回null，否则返回结果数组（有属性index:匹配字符的第一个字符的位置）
>
* 非全局调用：调用非全局RegExp对象的exec()时，返回数组: 
  1. 第一个元素是与正则表达式匹配的文本；
  2. 第二个元素是与RegExp对象的第一个子表达式（分组）相匹配的文本；
  3. 第三个元素是与RegExp对象的第二个子表达式（分组）相匹配的文本，以此类推。  

--------------------------------------------
### String对象的方法
* #### search()
>用于检索字符串中指定的字符串，或检索与正则表达式匹配的子字符串，方法返回第一个匹配结果index,查找不到返回-1。（不执行全局匹配，会忽略g标志）
  
* #### match()  
>检索字符串，以找到一个或多个与正则表达式匹配的文本（g标志会执行全局）
>1. 非全局调用  
  没有找到任何匹配返回null，否则返回一个数组，其中存放与匹配文本相关信息: 第一个元素是匹配文本，其余元素存放与正则表达式子表达式（分组）匹配的文本；  
>
>    __*除此之外，数组还有2个对象属性：*__   
     index： 匹配的文本起始字符的位置；  
     input： 原始字符串
>2. 全局调用  
  没有找到任何匹配返回null，否则返回一个数组，数组元素存放字符串中所有的匹配子串，没有index和input属性。

* #### split(reg)  
>在一些复杂的分割情况下，我们可以使用正则表达式来解决。  
```
eg: 'a1b2c3d4'.split(/\d/);  结果：['a', 'b', 'c', 'd']
```

* #### replace()
```
用法：  
1. replace(str1, str2)  
2. replace(reg, str)  
3. replace(reg, function)：在每次匹配替换时调用，有四个参数：  
   a. 匹配字符串；  
   b. 正则表达式分组内容，没有则没有该参数；  
   c. 匹配项在字符串中的index；  
   d. 原字符串； 

eg: 'a1b2c3d4e5'.replace(/(\d)(\w)(\d)/g, function (match, group1, group2, group3, index, 　origin) {
return group1 + group3 })
```